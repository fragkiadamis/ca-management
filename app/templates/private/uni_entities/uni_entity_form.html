{% from "./macros/_formhelpers.html" import render_field, render_field_with_value %}
{% extends "main.html" %}
{% block title %}Profile{% endblock %}
{% block body %}
    <div class="container mb-5">
        <h2 class="h1">{{ title }}</h2>
        {% if action == 'add' %}
            <form method="post" class="p-4 p-md-5 border rounded-3 bg-light" action="{{ url_for('ca.add_school') if entity == 'school' else url_for('ca.add_department', school_id=school['id']) }}">
                {{ form.csrf_token() }}
                {{ render_field(form.name) }}
                {{ render_field(form.description) }}
                <div class="clearfix">
                    {{ form.submit(class='btn btn-primary float-end') }}
                </div>
            </form>
        {% elif action == 'edit' %}
            <form method="post" action="{{ url_for('ca.edit_school', school_id=school['id']) if entity == 'school' else url_for('ca.edit_department', school_id=school['id'], department_id=department['id']) }}">
                {{ form.csrf_token() }}
                {{ render_field_with_value(form.name, school['name'] if entity == 'school' else department['name']) }}
                {{ render_field_with_value(form.description, school['description'] if entity == 'school' else department['description']) }}
                {% if form.schools %}
                    {{ render_field_with_value(form.schools, school['id']) }}
                {% endif %}
                <div class="clearfix">
                    {{ form.submit(class='btn btn-primary float-end', value=title) }}
                </div>
            </form>
        {% endif %}
    </div>
{% endblock %}
